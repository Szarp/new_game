<!DOCTYPE html>
<html>
<head>
  <meta >
<link   rel="stylesheet" type="text/css" href="5_in_row.css">

<script >

var			//varibles for whole document
   botArray=[0];
   leftArray=[0];
   array_x=[0];
   array_o=[0];
   x=0;
   player=0;
   y=0;
   array_xIndex=0;
   array_oIndex=0;
   var array=new Array(100);
   settings();
	function settings(){ //functions whith will be done once
	}
 function start(){
  Last=new Date();
  var z="cykl(0)";
  setTimeout(z,50);
  document.onkeydown = runScript;
} 
function cykl(x){
  var y=x+2;
  var z="cykl("+y+")";
  setTimeout( z ,50);
 }
 
 function checkIfWin(){
 right_slant();
 left_slant();
 top_bot();
 right();
 }
 function checkPar_y(array){
 	 var y1=array%100;
	return(y1);
 
 
 }
 function checkPar_x(array){
 	 var y1=array%100;
	 var x1=(array-y1)/100;
	return(x1);
 }
 function left_right(){
	 var y1=array_x[0]%100;
	 var x1=(array_x[0]-y1)/100;
	 var k=0;
	 var i=0;
	 for(i=0; i<array_x.length;  i++){  
		 var new_y=checkPar_y(array_x[i]);
		 if(y1-5<new_y && new_y<y1+5){
			botArray[k]=array_x[i];
			 k++;
		 }
	}
	console.log(botArray);
 }
 function top_bot(){
	 var y1=array_x[0]%100;
	 var x1=(array_x[0]-y1)/100;
	 var k=0;
	 var i=0;
	 for(i=0; i<array_x.length;  i++){  
		 var new_x=checkPar_x(array_x[i]);
		 if(x1-5<new_x && new_x<x1+5){
			leftArray[k]=array_x[i];
			 k++;
		 }
	}
	console.log(leftArray);
 }
function runScript(e) {  // Set up keys
    if(e.keyCode==13){ //enter
		putMark();
		//top_bot();
		left_right();
	}
	if(e.keyCode==87||e.keyCode==32||e.keyCode==68||e.keyCode==83||e.keyCode==65){
		if (e.keyCode == 32){ //Space
			tableCreate();
		}
		clearCursor();
		if (e.keyCode == 87) {//top W
			x--;
			if (checkPossition_x()==false){
				x++;
			}
			moveCursor();
		}

		if (e.keyCode == 68) {//left D
			y++;
			if (checkPossition_y()==false){
				y--;
			}	
			moveCursor();
		}
		else if (e.keyCode == 83) {//down S
			x++;
			if (checkPossition_x()==false){
				x--;
			}
			moveCursor();
		}
		else if (e.keyCode == 65) {//right A
			y--;
			if (checkPossition_y()==false){
				y++;
			}
			moveCursor();
		}
		//changePlayer(parPlayer);
	}
	else {return true;}
}
function changePlayer(){	//Change player 
	var mark;
	if(player==0){
		player=1;
		mark="cross";
	}
	else{
		player=0;
		mark="circle";
	}
	return(mark);
}
function putMark(){ //Put cross or circle 
	var string=x*100+y
	var a=document.getElementById("x"+x+"_"+y);
	var mark=changePlayer();
	a.className=mark
	addToArray(string,mark);
}
function addToArray(element,mark){ //Adds id from crosses and circles to arrays
	if(mark=="cross"){
		array_x[array_xIndex]=element;
		array_xIndex++;
		//console.log(array_x);
	}
	else{
		array_o[array_oIndex]=element;
		array_oIndex++;
		//console.log(array_o);
	}
}
function checkPossition_x(){ // Set up range of playing board 
	if (x< 0 || x >14){
		return false;
	}
	else{return true;}
}
function checkPossition_y(){ // Set up range of playing board 
	if (y<0 ||y>14){
		return false;
	}
	else{return true;}
}

function clearCursor(){ //clear last marker
	var a=document.getElementById("x"+x+"_"+y);
	a.style.color="black";

}
	
function moveCursor (){	//movng a marker of cursor
	var a=document.getElementById("x"+x+"_"+y);
	a.style.color="red";
}


function tableCreate() {
        //body reference 
        var body = document.getElementsByTagName("body")[0];

        // create elements <table> and a <tbody>
        var tbl   = document.createElement("table");
		tbl.className="table";
        var tblBody = document.createElement("tbody");

        // cells creation
        for (var j = 0; j < 15; j++) {
            // table row creation
            var row = document.createElement("tr");

            for (var i = 0; i < 15; i++) {
                // create element <td> and text node 
                //Make text node the contents of <td> element
                // put <td> at end of the table row
             var cell = document.createElement("td");
				cell.id="x"+j+"_"+i;  //create id for all td elements
				cell.className="normal";
                  var cellText = document.createTextNode(+j+","+i); 

                cell.appendChild(cellText);
                row.appendChild(cell);
            }

            //row added to end of table body
            tblBody.appendChild(row);
        }

        // append the <tbody> inside the <table>
        tbl.appendChild(tblBody);
        // put <table> in the <body>
        body.appendChild(tbl);
        // tbl border attribute to 
        tbl.setAttribute("border", "2");
    }

</script>
<style>

</style>
</head>
</head>
<body >


<div id="player_1" style="position:absolute;left:320px;top:20px; width: 10px; height: 10px; background: blue;" ></div>
<div id="player_2" style="position:absolute;left:320px;top:20px; width: 10px; height: 10px; background: red;" ></div>

<script>
window.onload = start(0);
</script>

</body>